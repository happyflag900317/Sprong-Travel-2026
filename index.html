<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 æ˜¥ç¯€éš¨èº«æ—…éŠæ‰‹å†Š</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #F8F5F2; color: #4A4A4A; -webkit-tap-highlight-color: transparent; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease-in-out; }
        .card { background: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.03); overflow: hidden; }
        .btn-nav { background-color: #8E9775; color: white; border-radius: 50px; padding: 6px 14px; font-size: 0.75rem; display: flex; align-items: center; gap: 4px; white-space: nowrap; }
        .category-tag { font-size: 10px; font-weight: bold; padding: 2px 8px; border-radius: 4px; margin-bottom: 4px; display: inline-block; }
        .tag-eat { background: #FFEDD5; color: #EA580C; }
        .tag-view { background: #DCFCE7; color: #16A34A; }
        .tag-stay { background: #DBEAFE; color: #2563EB; }
        .tag-shop { background: #F3E8FF; color: #9333EA; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="pb-24">

    <header class="bg-white p-6 pt-12 text-center shadow-sm">
        <h1 class="text-2xl font-light tracking-[0.3em] text-gray-800">2026 æ˜¥ç¯€ Â· æ—…</h1>
        <p class="text-xs text-gray-400 mt-2 italic font-light">Minimalist Travel Diary</p>
    </header>

    <main id="app" class="p-4 max-w-md mx-auto">
        
        <div id="itinerary" class="tab-content active space-y-10">
            <section class="day-section">
                <div class="flex justify-between items-end mb-4 px-1">
                    <div>
                        <h2 class="text-xl font-bold">02/15 <span class="text-sm font-normal text-gray-500 ml-2">å°å¹´å¤œ</span></h2>
                        <p class="text-xs text-blue-500 mt-1"><i class="fas fa-cloud-sun"></i> 16Â°C - 21Â°C Â· å°ä¸­</p>
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="card p-4 flex justify-between items-start border-l-4 border-orange-400">
                        <div><span class="category-tag tag-eat">ç¾é£Ÿ</span><h3 class="font-bold text-sm">GOGOGA æ¥µä¸Šé›æ¹¯</h3><p class="text-[10px] text-gray-400">12:30 | ç ‚é‹é›æ¹¯æ–°æ´¾ä¸­èœ</p></div>
                        <a href="https://maps.google.com/?q=GOGOGAæ¥µä¸Šé›æ¹¯" class="btn-nav"><i class="fas fa-location-arrow"></i> å°èˆª</a>
                    </div>
                    <div class="card p-4 flex justify-between items-start border-l-4 border-purple-400">
                        <div><span class="category-tag tag-shop">æ¡è²·</span><h3 class="font-bold text-sm">å¥½å¸‚å¤š å°ä¸­åº—</h3><p class="text-[10px] text-gray-400">14:15 | æº–å‚™é™¤å¤•é£Ÿæ</p></div>
                        <a href="https://maps.google.com/?q=Costcoå°ä¸­åº—" class="btn-nav"><i class="fas fa-location-arrow"></i> å°èˆª</a>
                    </div>
                </div>
            </section>

            <section class="day-section">
                <div class="flex justify-between items-end mb-4 px-1">
                    <h2 class="text-xl font-bold">02/16 <span class="text-sm font-normal text-gray-500 ml-2">é™¤å¤•</span></h2>
                    <p class="text-xs text-yellow-600"><i class="fas fa-sun"></i> 15Â°C - 22Â°C</p>
                </div>
                <div class="space-y-4">
                    <div class="card p-4 flex justify-between items-start border-l-4 border-green-400">
                        <div><span class="category-tag tag-view">æ™¯é»</span><h3 class="font-bold text-sm">åè±éµé¦¬é“</h3><p class="text-[10px] text-gray-400">10:00 | éš§é“å£ç§Ÿè»Šä¸­å¿ƒ</p></div>
                        <a href="https://maps.google.com/?q=åè±éµé¦¬é“éš§é“å£ç§Ÿè»Š" class="btn-nav"><i class="fas fa-location-arrow"></i> å°èˆª</a>
                    </div>
                    <div class="card p-4 bg-red-50 border-l-4 border-red-400">
                        <div><span class="category-tag bg-red-200 text-red-600">åœçˆ</span><h3 class="font-bold text-sm">æ°‘å®¿ç«é‹+ç‡’çƒ¤</h3><p class="text-[10px] text-gray-500">18:00 | è«å®¶èŠåŒ…æ£Ÿæ´¾å°</p></div>
                    </div>
                </div>
            </section>
            
            <p class="text-center text-[10px] text-gray-300 italic">æ›´å¤šè¡Œç¨‹è«‹æ–¼ä»£ç¢¼ä¸­æ“´å……...</p>
        </div>

        <div id="tools" class="tab-content space-y-8">
            <section>
                <h2 class="text-lg font-bold mb-4">ğŸ  ä½å®¿è³‡è¨Š</h2>
                <div class="card p-5 space-y-4 text-sm">
                    <div class="pb-3 border-b border-gray-100">
                        <p class="text-[10px] text-gray-400">02/15 - 02/17</p>
                        <p class="font-bold">è«å®¶èŠ (é›»æ¢¯åˆ¥å¢…)</p>
                    </div>
                    <div>
                        <p class="text-[10px] text-gray-400">02/18</p>
                        <p class="font-bold">å“ä¹Ÿå°å±‹æ¸¡å‡åœ’å€</p>
                    </div>
                </div>
            </section>

            <section>
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-bold">ğŸ’° é›²ç«¯è¨˜å¸³æœ¬</h2>
                    <button onclick="addExpenseRow()" class="bg-gray-800 text-white text-[10px] px-3 py-1 rounded-full">+ æ–°å¢é …ç›®</button>
                </div>
                <div class="card p-5">
                    <div id="expense-container" class="space-y-4">
                        </div>
                    <div class="mt-6 pt-4 border-t border-dashed flex justify-between items-center">
                        <span class="text-sm font-bold text-gray-400">ç¸½è¨ˆé‡‘é¡</span>
                        <span id="total-amount" class="text-xl font-bold text-green-600">$ 0</span>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <nav class="fixed bottom-0 w-full bg-white/90 backdrop-blur-md border-t border-gray-100 flex justify-around p-3 pb-6">
        <button onclick="switchTab('itinerary')" id="btn-itinerary" class="flex flex-col items-center text-gray-800">
            <i class="fas fa-map-marked-alt text-xl"></i><span class="text-[10px] mt-1">è¡Œç¨‹</span>
        </button>
        <button onclick="switchTab('tools')" id="btn-tools" class="flex flex-col items-center text-gray-400">
            <i class="fas fa-wallet text-xl"></i><span class="text-[10px] mt-1">è¨˜å¸³ä½å®¿</span>
        </button>
    </nav>

    <script>
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.getElementById('btn-itinerary').className = tabId === 'itinerary' ? 'flex flex-col items-center text-gray-800' : 'flex flex-col items-center text-gray-400';
            document.getElementById('btn-tools').className = tabId === 'tools' ? 'flex flex-col items-center text-gray-800' : 'flex flex-col items-center text-gray-400';
        }

        // --- Firebase è¨­å®š ---
        const firebaseConfig = {
            databaseURL: "https://console.firebase.google.com/u/0/project/springtravel-2026/database/springtravel-2026-default-rtdb/data/~2F" // âš ï¸è«‹æ›¿æ›!
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const expenseRef = db.ref('trip_2026/live_expenses');

        // ç›£è½é›²ç«¯è³‡æ–™
        expenseRef.on('value', (snapshot) => {
            const container = document.getElementById('expense-container');
            container.innerHTML = '';
            let total = 0;
            const data = snapshot.val();
            if (data) {
                Object.keys(data).forEach(id => {
                    const item = data[id];
                    total += parseInt(item.amount || 0);
                    renderRow(id, item.name, item.amount);
                });
            }
            document.getElementById('total-amount').innerText = '$ ' + total.toLocaleString();
        });

        function renderRow(id, name, amount) {
            const div = document.createElement('div');
            div.className = "flex gap-2 items-center";
            div.innerHTML = `
                <input type="text" value="${name}" onchange="updateFirebase('${id}', 'name', this.value)" 
                    class="bg-gray-50 text-xs p-2 rounded w-full outline-none" placeholder="é …ç›®...">
                <input type="number" value="${amount}" onchange="updateFirebase('${id}', 'amount', this.value)" 
                    class="bg-gray-50 text-xs p-2 rounded w-20 text-right outline-none" placeholder="0">
                <button onclick="deleteRow('${id}')" class="text-gray-300 px-1"><i class="fas fa-times text-xs"></i></button>
            `;
            document.getElementById('expense-container').appendChild(div);
        }

        function addExpenseRow() {
            expenseRef.push().set({ name: "", amount: 0 });
        }

        function updateFirebase(id, field, value) {
            const updates = {};
            updates[field] = value;
            expenseRef.child(id).update(updates);
        }

        function deleteRow(id) {
            if(confirm('åˆªé™¤æ­¤ç­†ï¼Ÿ')) expenseRef.child(id).remove();
        }
    </script>
</body>
</html>
